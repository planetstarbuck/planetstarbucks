{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input } from '@angular/core';\nlet ListComponent = class ListComponent {\n  constructor(route, listService, tokenStorageService, metaService, modalService, location) {\n    this.route = route;\n    this.listService = listService;\n    this.tokenStorageService = tokenStorageService;\n    this.metaService = metaService;\n    this.modalService = modalService;\n    this.location = location;\n    this.isLoggedIn = false;\n    this.showDropLink = false;\n    this.shortlistloading = false;\n    this.commentsloading = true;\n    this.copy = false;\n    this.flagged = false;\n    this.commentflagged = false;\n    this.isCollapsed = [];\n    this.show_max = 3;\n    this.show_max_clicked = false;\n    this.shortlistCreated = false;\n  }\n\n  shortlistCreation(shortlistFinalized) {\n    this.shortlistCreated = shortlistFinalized; // console.log(\"shortlist is gemaakt:\")\n    // console.log(this.shortlistCreated)\n    // console.log(\"shortlist is gemaakt:\")\n  }\n\n  goBack() {\n    this.location.back();\n  }\n\n  showMax() {\n    this.show_max = undefined;\n    this.show_max_clicked = true;\n  }\n\n  showMin() {\n    this.show_max = 3;\n    this.show_max_clicked = false;\n  }\n\n  openModal(template) {\n    this.modalRef = this.modalService.show(template);\n  }\n\n  flag(id, creator) {\n    this.listService.flag(id, creator).subscribe(outcome => {\n      this.flagged = true;\n    });\n  }\n\n  flagComment(id, creator) {\n    this.listService.flagComment(id, creator).subscribe(outcome => {\n      this.commentflagged = true;\n    });\n  }\n\n  copied(event) {\n    this.copy = event.isSuccess;\n  }\n\n  getList() {\n    const listId = this.route.snapshot.paramMap.get('listId');\n    console.log(\"het list-id = \" + listId);\n    this.listService.getListNo404(listId).subscribe(list => {\n      this.list = list;\n      const subList = this.list.sublist;\n      const creator = subList.map(listEl => listEl.subListCreator);\n      const itemList = subList.map(listEl => listEl.item);\n      this.listcount = itemList.map(items => items.length);\n      this.showEditlink = creator.find(element => element === this.username);\n\n      if (creator.length > 1 && this.shortlistCreated === false) {\n        this.shortlistloading = true;\n      } // console.log(\"this.shortlistloading\");\n      // console.log(this.shortlistloading);\n      // console.log(this.listcount);\n      // console.log(this.metaService.getTag(\"name='description'\"));\n\n\n      this.loading = false; // this.firstItem = itemList.map((item) => item[0].itemTitle );\n      // this.secondItem = itemList.map((item) => item[1].itemTitle );\n      // this.thirdItem = itemList.map((item) => item[2].itemTitle );\n      // this.metaService.updateTag( { name:'description', content:'1. ' + this.firstItem + '  2. ' + this.secondItem + '  3. ...' },\"name='description'\");\n\n      console.log(this.metaService.getTag(\"name='description'\"));\n      this.listService.getListNo404CommentCount(listId).subscribe(list => {\n        this.list = list;\n        this.loading = false;\n        this.commentsloading = false;\n      });\n    });\n  }\n\n  changeToClicked() {\n    this.copy = true;\n  }\n\n  addToSaved(saved_id) {\n    this.tokenStorageService.addSavedList(saved_id);\n    this.saved_lists = this.tokenStorageService.getSavedList();\n    this.listService.addSaved(this.username, saved_id);\n  }\n\n  removeFromSaved(saved_id) {\n    this.tokenStorageService.removeSavedList(saved_id);\n    this.saved_lists = this.tokenStorageService.getSavedList();\n    const user = this.tokenStorageService.getUser();\n    const username = user.username;\n    this.listService.removeSaved(username, saved_id);\n  }\n\n  unfollowChapter(chapter) {\n    this.listService.unfollowChapter(chapter);\n    this.tokenStorageService.removeSavedChapter(chapter);\n    const user = this.tokenStorageService.getUser();\n    this.followed_chapters = user.followed_chapters;\n  }\n\n  followChapter(chapter) {\n    this.listService.followChapter(chapter);\n    this.tokenStorageService.addSavedChapter(chapter);\n    const user = this.tokenStorageService.getUser();\n    this.followed_chapters = user.followed_chapters;\n  }\n\n  ngOnInit() {\n    this.loading = true;\n    this.isLoggedIn = !!this.tokenStorageService.getToken();\n    this.listid = this.route.snapshot.paramMap.get('listId'); // dit is handig om bij SAVE enzo weer op dezelfde page uit te komen na inloggen\n\n    this.tokenStorageService.redirectUrl = this.route.snapshot['_routerState'].url;\n\n    if (this.isLoggedIn) {\n      const user = this.tokenStorageService.getUser();\n      this.followed_chapters = user.followed_chapters;\n      this.saved_lists = this.tokenStorageService.getSavedList();\n      this.username = user.username;\n      this.showDropLink = true;\n    }\n\n    console.log(\"de user is \" + this.username);\n    console.log(\"de chapters zijn\" + this.followed_chapters);\n    this.getList();\n  }\n\n};\n\n__decorate([Input()], ListComponent.prototype, \"list\", void 0);\n\nListComponent = __decorate([Component({\n  selector: 'app-list',\n  templateUrl: './list.component.html',\n  styleUrls: ['./list.component.css']\n})], ListComponent);\nexport { ListComponent };","map":null,"metadata":{},"sourceType":"module"}